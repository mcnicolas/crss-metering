buildscript {
    repositories {
        maven {
            url "http://nexus.exist.com:8082/repository/maven-exist/"
            credentials {
                username "${mavenUser}"
                password "${mavenPassword}"
            }
        }
    }

    dependencies {
        classpath 'org.springframework.boot:spring-boot-gradle-plugin:1.4.1.RELEASE'
        classpath 'io.spring.gradle:dependency-management-plugin:0.6.1.RELEASE'
    }
}

ext {
    springBootVersion = '1.4.1.RELEASE'
    springAmqpVersion = '1.6.3.RELEASE'
}

subprojects {
    apply plugin: 'java'
    apply plugin: 'io.spring.dependency-management'

    project.version = '2.0.0-SNAPSHOT'
    project.buildDir = 'target'

    sourceCompatibility = 1.8
    targetCompatibility = 1.8

    repositories {
        maven {
            url "http://nexus.exist.com:8082/repository/maven-exist/"
            credentials {
                username "${mavenUser}"
                password "${mavenPassword}"
            }
        }
    }

    configurations {
        compile.exclude module: 'spring-boot-starter-tomcat'
    }

    dependencyManagement {
        imports {
            mavenBom 'org.springframework.cloud:spring-cloud-dependencies:Brixton.SR6'
            mavenBom "org.springframework.boot:spring-boot-dependencies:$springBootVersion"
        }

        dependencies {
            dependency ("org.springframework.boot:spring-boot-starter-jdbc:$springBootVersion") {
                exclude 'org.apache.tomcat:tomcat-jdbc'
            }

            dependencySet(group:'org.apache.poi', version:'3.15') {
                entry 'poi'
                entry 'poi-ooxml'
            }

            dependency 'net.sf.supercsv:super-csv-java8:2.4.0'

            dependency 'commons-io:commons-io:2.5'
            dependency 'org.apache.httpcomponents:httpclient:4.5.2'
            dependency 'org.json:json:20160810'

            dependency 'org.projectlombok:lombok:1.16.10'

            dependency 'com.zaxxer:HikariCP:2.5.1'
            dependency 'org.postgresql:postgresql:9.4.1211'
            dependency 'com.oracle:ojdbc6:11.2.0.3'

            dependency "org.springframework.amqp:spring-amqp:$springAmqpVersion"
            dependency "org.springframework.amqp:spring-rabbit:$springAmqpVersion"

            dependency 'org.springframework.security.oauth:spring-security-oauth2:2.0.10.RELEASE'
        }
    }

}

configure(subprojects - project(':commons-web') - project(':commons-service')) {
    apply plugin: 'spring-boot'
}